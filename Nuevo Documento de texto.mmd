graph TB
    subgraph Client["ðŸ”· Cliente (Android App)"]
        UI["UI Components<br/>- Activities<br/>- Fragments<br/>- RecyclerViews"]
        VM["ViewModels<br/>- FamilyVM<br/>- ChildVM<br/>- ActivityVM"]
    end

    subgraph Logic["ðŸ”· LÃ³gica de Negocio"]
        Repo["Repositories<br/>- FamilyRepo<br/>- ActivityRepo<br/>- AttendanceRepo"]
        Services["Services<br/>- AuthService<br/>- SyncService"]
    end

    subgraph Data["ðŸ”· Capa de Datos"]
        Local["Local Storage<br/>- Room Database<br/>- SharedPreferences"]
        Cache["Cache Layer"]
    end

    subgraph Backend["ðŸ”· Backend (Supabase)"]
        API["API REST/GraphQL"]
        Auth["Authentication<br/>- JWT Tokens<br/>- OAuth"]
        DB["PostgreSQL Database<br/>- Families<br/>- Children<br/>- Activities<br/>- Attendance<br/>- Documents"]
        Storage["File Storage<br/>- Documents<br/>- Photos"]
    end

    UI -->|Updates| VM
    VM -->|Query/Mutation| Repo
    Repo -->|Local CRUD| Local
    Repo -->|Sync| Services
    Services -->|HTTP/Realtime| API
    API -->|Authenticate| Auth
    API -->|Query/Insert| DB
    API -->|Upload/Download| Storage
    Cache -->|Cache| Local
    Local -->|Offline| VM

    style Client fill:#e3f2fd
    style Logic fill:#f3e5f5
    style Data fill:#e8f5e9
    style Backend fill:#fff3e0
